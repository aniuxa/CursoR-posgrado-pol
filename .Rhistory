knitr::opts_chunk$set(echo = TRUE)
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, haven, sjlabelled, foreign, janitor) #carga los paquetes necesarios para esta práctica
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, haven, sjlabelled) #carga los paquetes necesarios para esta práctica
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, haven, sjlabelled, foreign, janitor) #carga los paquetes necesarios para esta práctica
ecovid0420 <- read_dta("./datos/covid0420.dta")
setwd("/Users/anaescoto/Dropbox/2020/CursoR-posgrado-pol")
ecovid0420 <- read_dta("./datos/covid0420.dta")
ecovid0420 <- read_dta("./datos/ecovid0420.dta")
base_descriptiva %>% count(pb1==2) # cuentan los casos que cumplen con la condición "pb1==2"
ecovid0420 %>% tabyl(pb1)
ecovid0420 %>% with(table(pb1))
ecovid0420 %>% mutate(pb1=as_label(pb1)
%>% tabyl(pb1)
ecovid0420 %>% mutate(pb1=as_label(pb1))
%>% tabyl(pb1)
ecovid0420 %>% mutate(pb1=as_label(pb1))  %>%
tabyl(pb1)
ecovid0420 %>% mutate(pb3=as_label(pb3)) %>%
tabyl(pb3)
class(ecovid0420$pb1) # variable sin etiqueta
class(as_label(ecovid0420$pb1)) # variable con etiqueta
class(as_label(ecovid0420$pb3)) # variable ordinal
class(as_label(ecovid0420$pe10_1)) # variable de intervalo/razón
glimpse(ecovid0420$pb1)
ecovid0420 %>% mutate(pb1=as_label(pb1)) %>% # cambia los valores de la variable a sus etiquetas
tabyl(pb1) %>% # para hacer la tabla
adorn_totals() %>% # añade totales
adorn_pct_formatting()  # nos da porcentaje en lugar de proporción
glimpse(ecovid0420$pb3)
ecovid0420 %>%
mutate(pb3=as_label(pb3)) %>%
tabyl(pb3, show_missing_levels=F ) %>% # esta opción elimina los valores con 0
adorn_totals()
ecovid0420 %>%
mutate(pb3=as_label(pb3)) %>% # para que las lea como factor
mutate(pb1=as_label(pb1)) %>% # para que las lea como facto
tabyl(pb3, pb1, show_missing_levels=F ) %>% # incluimos aquí
adorn_totals()
ecovid0420 %>%
count(pb3==1 & pb1==1) # nos da la primera celda
library(readxl)
ICI_2018 <- read_excel("datos/ICI_2018.xlsx",
sheet = "para_importar")
View(ICI_2018)
knitr::opts_chunk$set(echo = TRUE)
ICI_2018<-clean(ICI_2018)
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, haven, sjlabelled, foreign, janitor) #carga los paquetes necesarios para esta práctica
ICI_2018<-clean(ICI_2018)
ICI_2018<-clean_names(ICI_2018)
names(ICI_2018)
knitr::opts_chunk$set(echo = TRUE)
#Revisamos los valores de la variable
table(ecovid0420$pos_ocu)
# De acuerdo a la documentación de la base de datos tenemos:
ecovid0420$pos_ocu<-set_labels(ecovid0420$pos_ocu,
labels=c("No Aplica", # para 0
"Subordinadxs", # para el 1
"Cuenta Propia", # para el 2
"Sin pago")) # Para el 3
set_label(pos_ocu)<-"Posición en la ocupación"
#Revisamos los valores de la variable
table(ecovid0420$pos_ocu)
# De acuerdo a la documentación de la base de datos tenemos:
ecovid0420$pos_ocu<-set_labels(ecovid0420$pos_ocu,
labels=c("No Aplica", # para 0
"Subordinadxs", # para el 1
"Cuenta Propia", # para el 2
"Sin pago")) # Para el 3
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr) #carga los paquetes necesarios para esta práctica
#Revisamos los valores de la variable
table(ecovid0420$pos_ocu)
# De acuerdo a la documentación de la base de datos tenemos:
ecovid0420$pos_ocu<-set_labels(ecovid0420$pos_ocu,
labels=c("No Aplica", # para 0
"Subordinadxs", # para el 1
"Cuenta Propia", # para el 2
"Sin pago")) # Para el 3
set_label(ecovid0420$pos_ocu)<-"Posición en la ocupación"
View(ecovid0420)
View(ecovid0420$pos_ocu)
ecovid0420 %>% mutate(pos_ocu=as_label(pos_ocu)) %>%  tabyl(pos_ocu)
paste(get_label(ecovid0420$pos_ocu))
knitr::opts_chunk$set(echo = TRUE)
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr, esquisse) #carga los paquetes necesarios para esta práctica
setwd("/Users/anaescoto/Dropbox/2020/CursoR-posgrado-pol")
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr, esquisse) #carga los paquetes necesarios para esta práctica
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr, esquisse) #carga los paquetes necesarios para esta práctica
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr, esquisse) #carga los paquetes necesarios para esta práctica
ecovid0420 <- read_dta("./datos/ecovid0420.dta")
ICI_2018 <- read_excel("./datos/ICI_2018.xlsx", sheet = "para_importar")
ICI_2018 <- read_excel("./datos/ICI_2018.xlsx", sheet = "para_importar")
ICI_2018 <- clean_names(ICI_2018) # limpia los nombres
ecovid0420 %>%
tabyl(pb1) %>%
plot()
plot(ecovid0420$pb2)
plot(as_label(ecovid0420$pb1))
barplot(as_label(ecovid0420$pb1))
barplot(as_label(table(ecovid0420$pb1)))
barplot((table(as_label(ecovid0420$pb1)))
barplot(table(as_label(ecovid0420$pb1)))
hist(ICI_2018$esperanza_de_vida)
boxplot(ICI_2018$esperanza_de_vida)
g<-ecovid0420 %>%
ggplot(aes(as_label(pb1))
g<-ecovid0420 %>%
ggplot(aes(as_label(pb1)))
g1<-ecovid0420 %>%
ggplot(aes(as_label(pb1)))
g1
g1 + geom_bar()
g2<-ecovid0420 %>%
ggplot(aes(pb2))
g2 # imprime el lienzo
g2 + geom_histogram()
g2 + geom_density()
g1 +  geom_bar(aes(fill = as_label(pb1)))
g1 +  geom_bar(aes(fill = as_label(pb1))) # colorea
# Esto es equivalente
ecovid0420 %>%
ggplot(aes(as_label(pb1),
gill = as_label(pb1)
)
)
g1 +  geom_bar(aes(fill = as_label(pb1))) # colorea
# Esto es equivalente
ecovid0420 %>%
ggplot(aes(as_label(pb1),
fill = as_label(pb1)
)
) + geom_bar()
g1 +  geom_bar(aes(fill = as_label(pb1)),
position="dodge") #pone las categorías lado a lado y no apiladas
g1<-ecovid0420 %>%
ggplot(aes(as_label(pb3)))
g1 # imprime el lienzo
g1 + geom_bar()
g1 +  geom_bar(aes(
fill = as_label(pb3)
)) # colorea la geometría
# Esto es equivalente
ecovid0420 %>%
ggplot(aes(as_label(pb3),
fill = as_label(pb3)
)
) + geom_bar()
g2<-ecovid0420 %>%
ggplot(aes(pb2))
g2 # imprime el lienzo
g2 + geom_histogram()
g1 +  geom_bar(aes(fill = as_label(pb1)),
position="dodge") #pone las categorías lado a lado y no apiladas
g_bivariado <- g1 +  geom_bar(aes(fill = as_label(pb1)),
position="fill") # cada categoría "llena" a una unidad
g_bivariado
g_bivariado <- g1 +  geom_bar(aes(fill = as_label(pb1)),
position="fill") # cada categoría "llena" a una unidad
g_bivariado
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr, esquisse) #carga los paquetes necesarios para esta práctica
if (!require("pacman")) install.packages("pacman") # instala pacman si se requiere
pacman::p_load(tidyverse, readxl,haven, sjlabelled, foreign, janitor, srvyr, esquisse) #carga los paquetes necesarios para esta práctica
library(esquisse)
library(esquisse)
library(esquisse)
library(esquisse)
library(esquisse)
library(esquisse)
library(esquisse)
library(esquisse)
library(esquisse)
knitr::opts_chunk$set(echo = TRUE)
library(esquisse)
if (!require("devtools")) {
install.packages("devtools")
}
devtools::install_github("diegovalle/mxmaps")
library(mxmaps)
data("df_mxstate") # carga la base estatal
df_mxstate$value <- df_mxstate$pop
mxstate_choropleth(df_mxstate,
title = "Total población, por Estado")
library(readxl)
ICE_2018 <- read_excel("ICE_2018.xlsx", sheet = "para_importar")
ICE_2018 <- clean_names(ICE_2018)
ICE_2018$value<- ICE_2018$homicidios
mxstate_choropleth(ICE_2018,
title = "Tasa de homicidios")
